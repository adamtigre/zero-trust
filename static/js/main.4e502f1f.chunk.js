(this["webpackJsonpzero-trust"]=this["webpackJsonpzero-trust"]||[]).push([[0],{1026:function(e,t,n){},1027:function(e,t,n){},1030:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(55),r=n.n(c),i=n(42),o=n(22),s=n(19),l=n.n(s),d=n(192),u=n(58),j=n(139),b=n(1);var p=function(e){var t=e.create,n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],p=Object(a.useState)(),f=Object(o.a)(p,2),m=f[0],h=f[1],v=Object(a.useState)(),x=Object(o.a)(v,2),O=x[0],y=x[1],g=Object(a.useState)(),w=Object(o.a)(g,2),N=w[0],k=w[1],B=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(O,m,N);case 2:console.log("Created new bond"),C();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){return s(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.a,{variant:"primary",onClick:function(){return s(!0)},children:"New Bond"}),Object(b.jsxs)(j.a,{show:r,onHide:C,children:[Object(b.jsx)(j.a.Header,{closeButton:!0,children:Object(b.jsx)(j.a.Title,{children:"Create New Bond"})}),Object(b.jsx)(j.a.Body,{children:Object(b.jsxs)(u.a,{children:[Object(b.jsxs)(u.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(b.jsx)(u.a.Label,{children:"Including"}),Object(b.jsx)(u.a.Control,{type:"text",placeholder:"Enter second party wallet address",onChange:function(e){return h(e.target.value)}})]}),Object(b.jsxs)(u.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(b.jsx)(u.a.Label,{children:"Description"}),Object(b.jsx)(u.a.Control,{as:"textarea",rows:3,onChange:function(e){return y(e.target.value)}})]}),Object(b.jsxs)(u.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput2",children:[Object(b.jsx)(u.a.Label,{children:"Amount Expected"}),Object(b.jsx)(u.a.Control,{type:"number",placeholder:"Amount you are expecting from second party (in CELO)",onChange:function(e){return k(e.target.value)}})]})]})}),Object(b.jsxs)(j.a.Footer,{children:[Object(b.jsx)(d.a,{variant:"secondary",onClick:C,children:"Close"}),Object(b.jsx)(d.a,{variant:"primary",onClick:function(){return B()},children:"Save Changes"})]})]})]})},f=n(466),m=n.n(f),h=n(32),v=n.n(h),x=n(469),O=n(470),y=(n(1026),function(e){if(e)return e.slice(0,5)+"..."+e.slice(e.length-4,e.length)}),g=function(e){var t,n=e.bd,a=e.catg,c=e.signBond,r=e.validateBond,i=e.confirmBond,o=e.closeBond;return Object(b.jsxs)("div",{className:"bond-card",children:[Object(b.jsx)("div",{className:"bond-title",children:"Transaction Receipt"}),Object(b.jsxs)("div",{className:"bond-info",children:[Object(b.jsx)("div",{className:"info",children:Object(b.jsxs)("table",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"ID: "}),Object(b.jsx)("td",{children:n.id})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Description:"}),Object(b.jsx)("td",{children:n.description})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Amount: "}),Object(b.jsxs)("td",{children:[new v.a(n.amount).shiftedBy(-18).toString()," ","CELO"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Created By: "}),Object(b.jsx)("td",{children:y(n.creator)})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Party Involved: "}),Object(b.jsx)("td",{children:y(n.partyInvolved)})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Confirmations: "}),Object(b.jsx)("td",{children:(t=n.confirmations,Number(t[0])+Number(t[1])==0?"0 Confirmations":Number(t[0])>1&&0==Number(t[1])?"1 [Bond creator],":0==Number(t[0])&&Number(t[1]>1)?"1 [Party involved]":Number(t[0])>0&&Number(t[1])>1?"2 [Both parties]":void 0)})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Signed: "}),Object(b.jsx)("td",{children:n.signed.toString()})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Validated: "}),Object(b.jsx)("td",{children:n.validated.toString()})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Completed: "}),Object(b.jsx)("td",{children:n.completed.toString()})]})]})}),Object(b.jsxs)("div",{className:"bond-actions",children:[Object(b.jsx)("button",{hidden:"sign"!=a,onClick:function(){return c(n.id)},children:"Sign"}),Object(b.jsx)("button",{hidden:"validate"!=a,onClick:function(){return r(n.id)},children:"Validate"}),Object(b.jsx)("button",{hidden:"confirm"!=a,onClick:function(){return i(n.id)},children:"Confirm"}),Object(b.jsx)("button",{hidden:"close"!=a,onClick:function(){return o(n.id)},children:"Close"})]})]})]})},w=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(o.a)(r,2),d=s[0],u=s[1],j=Object(a.useState)(),f=Object(o.a)(j,2),h=f[0],w=f[1],N=Object(a.useState)(),k=Object(o.a)(N,2),B=k[0],C=k[1],T=Object(a.useState)(),S=Object(o.a)(T,2),I=S[0],A=S[1],F=Object(a.useState)(),E=Object(o.a)(F,2),M=E[0],L=E[1],_=Object(a.useState)(),D=Object(o.a)(_,2),P=D[0],G=D[1],J=Object(a.useState)([]),V=Object(o.a)(J,2),W=V[0],z=V[1],H=Object(a.useState)([]),K=Object(o.a)(H,2),R=K[0],U=K[1],Y=Object(a.useState)([]),Z=Object(o.a)(Y,2),q=Z[0],Q=Z[1],X=Object(a.useState)([]),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(),ae=Object(o.a)(ne,2),ce=ae[0],re=ae[1],ie=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getTotalBalance(d);case 3:return t=e.sent,n=t.CELO.shiftedBy(-18).toFixed(2),a=new I.web3.eth.Contract(O,"0xD0A044b137DBF7E14464164323139a52e1E0bc31"),e.prev=6,e.next=9,a.methods.getAdmin().call();case 9:r=e.sent,w(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:c(n),C(a),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[0,20],[6,13]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=20;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new m.a(window.celo),n=Object(x.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:a=e.sent,c=a[0],n.defaultAccount=c,A(n),u(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:e.next=21;break;case 20:alert("You need to install the celo wallet extension in order to use this app");case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.methods.getLength().call();case 2:for(t=e.sent,n=[],a=function(e){var t=new Promise(function(){var t=Object(i.a)(l.a.mark((function t(n,a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.methods.viewBond(e).call();case 2:c=t.sent,n({id:e,description:c[0],amount:c[1],creator:c[2],partyInvolved:c[3],confirmations:c[4],signed:c[5],validated:c[6],completed:c[7]});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());n.push(t)},c=0;c<t;c++)a(c);return e.next=8,Promise.all(n);case 8:r=e.sent,console.log(r),L(r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(i.a)(l.a.mark((function e(t,n,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new v.a(a).shiftedBy(18).toString(),e.next=4,B.methods.createBond(t,c,n).send({from:d});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return e.next=11,se();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.methods.signBond(t).send({from:d});case 3:window.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.methods.validateBond(t).send({from:d});case 3:window.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=M[t],e.prev=1,n.creator!=d){e.next=8;break}return e.next=5,B.methods.makeConfirmation(t).send({from:d});case 5:window.location.reload(),e.next=12;break;case 8:if(n.partyInvolved!=d){e.next=12;break}return e.next=11,B.methods.makeConfirmation(t).send({from:d,value:n.amount});case 11:window.location.reload();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.methods.closeBond(t).send({from:d});case 3:window.location.reload(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.methods.withdrawAccumulatedFees().send({from:d});case 3:window.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.methods.getTotalAdminFees().call();case 3:t=e.sent,re(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){oe()}),[]),Object(a.useEffect)((function(){I&&d&&ie()}),[I,d]),Object(a.useEffect)((function(){B&&(se(),fe())}),[B]),Object(a.useEffect)((function(){M&&(function(){if(M.length>0){var e=M.filter((function(e){return e.partyInvolved==d})).filter((function(e){return 0==e.signed}));z(e)}}(),function(){if(M.length>0){var e=M.filter((function(e){return 1==e.signed&&0==e.validated}));Q(e)}}(),function(){if(M.length>0){var e=M.filter((function(e){return e.creator==d||e.partyInvolved==d})).filter((function(e){return e.signed&&e.validated})).filter((function(e){return 0==Number(e.confirmations[0])||0==Number(e.confirmations[1])}));U(e)}}(),function(){if(M.length>0){var e=M.filter((function(e){return e.validated&&0==e.completed})).filter((function(e){return 0!=Number(e.confirmations[0])&&0!=Number(e.confirmations[1])}));te(e)}}(),function(){if(M.length>0){var e=M.filter((function(e){return e.creator==d}));G(e)}}())}),[M]),Object(b.jsx)(b.Fragment,{children:h?Object(b.jsxs)("div",{className:"app",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("div",{className:"logo",children:"Zero Trust"}),Object(b.jsxs)("div",{className:"notifs",children:[d!=h&&Object(b.jsxs)("div",{className:"notif",children:["Sign ",Object(b.jsx)("span",{children:null===W||void 0===W?void 0:W.length})]}),d==h&&Object(b.jsxs)("div",{className:"notif",children:["Validate ",Object(b.jsx)("span",{children:null===q||void 0===q?void 0:q.length})]}),d!=h&&Object(b.jsxs)("div",{className:"notif",children:["Confirm ",Object(b.jsx)("span",{children:null===R||void 0===R?void 0:R.length})]}),d==h&&Object(b.jsxs)("div",{className:"notif",children:["Close ",Object(b.jsx)("span",{children:null===ee||void 0===ee?void 0:ee.length})]}),d==h&&Object(b.jsxs)("div",{className:"admin-withd",children:[Object(b.jsxs)("div",{children:["Accumulated:"," ",Object(b.jsxs)("span",{children:[new v.a(ce).shiftedBy(-18).toString()," ","CELO"]})]}),Object(b.jsx)("button",{onClick:function(){return pe()},children:"Withdraw"})]})]}),Object(b.jsxs)("div",{className:"bal",children:["Bal: ",Object(b.jsx)("span",{children:n})]})]}),d==h?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"lg-title-heading",children:"Admin panel"}),Object(b.jsx)("div",{className:"sm-title",children:"Bonds awaiting validation"}),(null===q||void 0===q?void 0:q.length)>0?null===q||void 0===q?void 0:q.map((function(e){return Object(b.jsx)(g,{bd:e,catg:"validate",validateBond:ue})})):Object(b.jsx)("div",{className:"none-none",children:"None"}),Object(b.jsx)("div",{className:"sm-title",children:"Bond awaiting to be closed"}),(null===ee||void 0===ee?void 0:ee.length)>0?null===ee||void 0===ee?void 0:ee.map((function(e){return Object(b.jsx)(g,{bd:e,catg:"close",closeBond:be})})):Object(b.jsx)("div",{className:"none-none",children:"None"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"lg-title-heading",children:["User"," ",Object(b.jsx)("span",{className:"wallet-span",children:y(d)})," ",Object(b.jsx)(p,{create:le})]}),Object(b.jsx)("div",{className:"sm-title",children:"List of bonds you have created and their status"}),Object(b.jsx)("div",{className:"bonds",children:null===P||void 0===P?void 0:P.map((function(e){return Object(b.jsx)(g,{bd:e})}))}),Object(b.jsx)("div",{className:"sm-title",children:"Bonds waiting to be signed"}),Object(b.jsx)("div",{className:"bonds",children:(null===W||void 0===W?void 0:W.length)>0?null===W||void 0===W?void 0:W.map((function(e){return Object(b.jsx)(g,{bd:e,catg:"sign",signBond:de})})):Object(b.jsx)("div",{className:"none-none",children:"None"})}),Object(b.jsx)("div",{className:"sm-title",children:"Bonds waiting to be confirmed"}),Object(b.jsx)("div",{className:"bonds",children:(null===R||void 0===R?void 0:R.length)>0?null===R||void 0===R?void 0:R.map((function(e){return Object(b.jsx)(g,{bd:e,catg:"confirm",confirmBond:je})})):Object(b.jsx)("div",{className:"none-none",children:"None"})})]})]}):Object(b.jsx)("div",{className:"wait-am",children:"Wait a moment ..."})})};n(1027),n(1028);r.a.render(Object(b.jsx)(w,{}),document.getElementById("root"))},470:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":true,"internalType":"address","name":"party1","type":"address"},{"indexed":true,"internalType":"address","name":"party2","type":"address"}],"name":"CreateBond","type":"event"},{"inputs":[{"internalType":"uint256","name":"_bondId","type":"uint256"}],"name":"closeBond","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"uint256","name":"_expectedAmount","type":"uint256"},{"internalType":"address","name":"_partyInvolved","type":"address"}],"name":"createBond","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAdmin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalAdminFees","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_bondId","type":"uint256"}],"name":"makeConfirmation","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_bondId","type":"uint256"}],"name":"signBond","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_bondId","type":"uint256"}],"name":"validateBond","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_bondId","type":"uint256"}],"name":"viewBond","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"creator","type":"address"},{"internalType":"address","name":"partyInvolved","type":"address"},{"internalType":"address[2]","name":"confirmations","type":"address[2]"},{"internalType":"bool","name":"signed","type":"bool"},{"internalType":"bool","name":"validated","type":"bool"},{"internalType":"bool","name":"completed","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdrawAccumulatedFees","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},491:function(e,t){},494:function(e,t){},495:function(e,t){},499:function(e,t){},500:function(e,t){},525:function(e,t){},527:function(e,t){},541:function(e,t){},543:function(e,t){},557:function(e,t){},560:function(e,t){},592:function(e,t){},595:function(e,t){},603:function(e,t){},604:function(e,t){},606:function(e,t){},609:function(e,t){},615:function(e,t){},618:function(e,t){},624:function(e,t){},627:function(e,t){},634:function(e,t){},637:function(e,t){},643:function(e,t){},646:function(e,t){},691:function(e,t){},694:function(e,t){},723:function(e,t){},725:function(e,t){},731:function(e,t){},743:function(e,t){},746:function(e,t){},750:function(e,t){},755:function(e,t){},845:function(e,t){},848:function(e,t){},858:function(e,t){},863:function(e,t){},892:function(e,t){},929:function(e,t){},974:function(e,t){}},[[1030,1,2]]]);
//# sourceMappingURL=main.4e502f1f.chunk.js.map